"use strict";var N=Object.defineProperty;var X=Object.getOwnPropertyDescriptor;var Z=Object.getOwnPropertyNames;var B=Object.prototype.hasOwnProperty;var G=(n,e)=>{for(var t in e)N(n,t,{get:e[t],enumerable:!0})},Q=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Z(e))!B.call(n,i)&&i!==t&&N(n,i,{get:()=>e[i],enumerable:!(r=X(e,i))||r.enumerable});return n};var Y=n=>Q(N({},"__esModule",{value:!0}),n);var le={};G(le,{parsers:()=>U,printers:()=>V});module.exports=Y(le);var P=require("prettier"),j=require("prettier/plugins/babel"),E=require("prettier/plugins/html"),J=require("prettier/plugins/typescript");function h(){}h.prototype={diff:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.callback;typeof r=="function"&&(i=r,r={}),this.options=r;var s=this;function o(a){return i?(setTimeout(function(){i(void 0,a)},0),!0):a}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));var l=t.length,d=e.length,f=1,u=l+d;r.maxEditLength&&(u=Math.min(u,r.maxEditLength));var c=[{newPos:-1,components:[]}],v=this.extractCommon(c[0],t,e,0);if(c[0].newPos+1>=l&&v+1>=d)return o([{value:this.join(t),count:t.length}]);function g(){for(var a=-1*f;a<=f;a+=2){var p=void 0,y=c[a-1],w=c[a+1],T=(w?w.newPos:0)-a;y&&(c[a-1]=void 0);var W=y&&y.newPos+1<l,z=w&&0<=T&&T<d;if(!W&&!z){c[a]=void 0;continue}if(!W||z&&y.newPos<w.newPos?(p=k(w),s.pushComponent(p.components,void 0,!0)):(p=y,p.newPos++,s.pushComponent(p.components,!0,void 0)),T=s.extractCommon(p,t,e,a),p.newPos+1>=l&&T+1>=d)return o(K(s,p.components,t,e,s.useLongestToken));c[a]=p}f++}if(i)(function a(){setTimeout(function(){if(f>u)return i();g()||a()},0)})();else for(;f<=u;){var m=g();if(m)return m}},pushComponent:function(e,t,r){var i=e[e.length-1];i&&i.added===t&&i.removed===r?e[e.length-1]={count:i.count+1,added:t,removed:r}:e.push({count:1,added:t,removed:r})},extractCommon:function(e,t,r,i){for(var s=t.length,o=r.length,l=e.newPos,d=l-i,f=0;l+1<s&&d+1<o&&this.equals(t[l+1],r[d+1]);)l++,d++,f++;return f&&e.components.push({count:f}),e.newPos=l,d},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],r=0;r<e.length;r++)e[r]&&t.push(e[r]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function K(n,e,t,r,i){for(var s=0,o=e.length,l=0,d=0;s<o;s++){var f=e[s];if(f.removed){if(f.value=n.join(r.slice(d,d+f.count)),d+=f.count,s&&e[s-1].added){var c=e[s-1];e[s-1]=e[s],e[s]=c}}else{if(!f.added&&i){var u=t.slice(l,l+f.count);u=u.map(function(g,m){var a=r[d+m];return a.length>g.length?a:g}),f.value=n.join(u)}else f.value=n.join(t.slice(l,l+f.count));l+=f.count,f.added||(d+=f.count)}}var v=e[o-1];return o>1&&typeof v.value=="string"&&(v.added||v.removed)&&n.equals("",v.value)&&(e[o-2].value+=v.value,e.pop()),e}function k(n){return{newPos:n.newPos,components:n.components.slice(0)}}var fe=new h;function _(n,e){if(typeof n=="function")e.callback=n;else if(n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}var q=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,M=/\S/,O=new h;O.equals=function(n,e){return this.options.ignoreCase&&(n=n.toLowerCase(),e=e.toLowerCase()),n===e||this.options.ignoreWhitespace&&!M.test(n)&&!M.test(e)};O.tokenize=function(n){for(var e=n.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),t=0;t<e.length-1;t++)!e[t+1]&&e[t+2]&&q.test(e[t])&&q.test(e[t+2])&&(e[t]+=e[t+2],e.splice(t+1,2),t--);return e};function F(n,e,t){return t=_(t,{ignoreWhitespace:!0}),O.diff(n,e,t)}var $=new h;$.tokenize=function(n){var e=[],t=n.split(/(\n|\r\n)/);t[t.length-1]||t.pop();for(var r=0;r<t.length;r++){var i=t[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};function D(n,e,t){return $.diff(n,e,t)}var ee=new h;ee.tokenize=function(n){return n.split(/(\S.+?[.!?])(?=\s+|$)/)};var ne=new h;ne.tokenize=function(n){return n.split(/([{}:;,]|\s+)/)};function b(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?b=function(e){return typeof e}:b=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(n)}var te=Object.prototype.toString,L=new h;L.useLongestToken=!0;L.tokenize=$.tokenize;L.castInput=function(n){var e=this.options,t=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(s,o){return typeof o>"u"?t:o}:r;return typeof n=="string"?n:JSON.stringify(H(n,null,null,i),i,"  ")};L.equals=function(n,e){return h.prototype.equals.call(L,n.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function H(n,e,t,r,i){e=e||[],t=t||[],r&&(n=r(i,n));var s;for(s=0;s<e.length;s+=1)if(e[s]===n)return t[s];var o;if(te.call(n)==="[object Array]"){for(e.push(n),o=new Array(n.length),t.push(o),s=0;s<n.length;s+=1)o[s]=H(n[s],e,t,r,i);return e.pop(),t.pop(),o}if(n&&n.toJSON&&(n=n.toJSON()),b(n)==="object"&&n!==null){e.push(n),o={},t.push(o);var l=[],d;for(d in n)n.hasOwnProperty(d)&&l.push(d);for(l.sort(),s=0;s<l.length;s+=1)d=l[s],o[d]=H(n[d],e,t,r,d);e.pop(),t.pop()}else o=n;return o}var I=new h;I.tokenize=function(n){return n.slice()};I.join=I.removeEmpty=function(n){return n};function C(n,e){if(n===e)return[];let t=[],r=null;return D(n,e).forEach(i=>{if(i.added&&i.removed)throw new Error("Unexpected change");i.removed?(r!==null&&t.push({type:"change",from:r,to:""}),r=i.value):i.added?r===null?t.push({type:"change",from:"",to:i.value}):(t.push({type:"change",from:r,to:i.value}),r=null):(r!==null&&(t.push({type:"change",from:r,to:""}),r=null),t.push({type:"keep",value:i.value}))}),t}function R(n,e){return e.reduce((t,r)=>{if(r.length===0)return t;let i=t,s=0,o=[];return r.forEach(l=>{let d=i.slice(0,s),f=i.slice(s);if(l.type==="keep"){if(f.indexOf(l.value)===-1){let u=0;F(l.value,f.slice(0,l.value.length*2)).slice(0,-1).forEach(({added:c,removed:v,value:g})=>{c?u+=g.length:v&&(u-=g.length)}),s+=l.value.length+u}else s+=l.value.length;o.length&&o.push({type:"change",from:l.value,to:l.value})}else if(f.indexOf(l.from)===-1){let u=0;F(l.from,f.slice(0,l.from.length*2)).slice(0,-1).forEach(({added:p,removed:y,value:w})=>{p?u+=w.length:y&&(u-=w.length)}),s+=l.from.length+u,o.push(l);let c=o.map(({from:p})=>p).join(""),v=o.map(({to:p})=>p).join(""),g=F(c,v),m=g.filter(({removed:p})=>p).map(({value:p})=>p.trim()).join(""),a=g.filter(({added:p})=>p).map(({value:p})=>p.trim()).join("");m===a&&(o=[])}else if(o.length===0)i=`${d}${f.replace(l.from,l.to.replace(/\$/g,"$$$$"))}`,s+=l.to.length;else{o.push(l);let u=o.map(({from:a})=>a).join(""),c=o.map(({to:a})=>a).join(""),v=F(u,c),g=v.filter(({removed:a})=>a).map(({value:a})=>a.trim()).join(""),m=v.filter(({added:a})=>a).map(({value:a})=>a.trim()).join("");g===m&&(s+=l.from.length,o=[])}}),i},n)}var S=`
`;async function A(n,e,t){let r="```",i="```";return e.parser==="babel"?r="```jsx":e.parser==="typescript"&&(r="```tsx"),(await(0,P.format)(`${r}${S}${n}${S}${i}`,{...e,plugins:t??[],rangeEnd:1/0,endOfLine:"lf",parser:e.parentParser,parentParser:void 0})).trim().slice(`${r}${S}`.length,-`${S}${i}`.length)}async function ie(n,e,t){let r=t?[t]:[],{originalText:i}=n,s={...n,rangeEnd:1/0,endOfLine:"lf",plugins:r},o=n.parentParser==="markdown"||n.parentParser==="mdx"?A(i,n):(0,P.format)(i,s),l=[];return await e.reduce(async(f,u)=>{let c=await f,v=n.parentParser==="markdown"||n.parentParser==="mdx"?await A(c,s,[...r,u]):await(0,P.format)(c,{...s,plugins:[...r,u]}),g=n.parentParser==="markdown"||n.parentParser==="mdx"?await A(v,s):await(0,P.format)(v,s);return l.push(C(g,v)),R(g,l)},o)}function x(n,e,t){return{...e,parse:async(r,i)=>{let s=i.plugins.filter(u=>typeof u!="string"),o=s.findIndex(u=>Object.values(u.parsers??{}).every(c=>c.astFormat==="merging-ast")&&Object.entries(u.printers??{}).every(([c,v])=>c==="merging-ast"&&Object.keys(v).every(g=>g==="print")));if(o===-1)throw new Error("The structure of this plugin may have changed. If it's not in development, you may need to report an issue.");let l;if(t&&(l=s.slice(0,o).filter(u=>u.languages?.some(c=>c.name===t)).at(0),!l))throw new Error(`There doesn't seem to be any plugin that supports ${t} formatting.`);let d=s.slice(0,o).filter(u=>u.parsers?.[n]);return{type:"FormattedText",body:await ie({...i,originalText:r},d,l)}},astFormat:"merging-ast"}}var U={babel:x("babel",j.parsers.babel),typescript:x("typescript",J.parsers.typescript),angular:x("angular",E.parsers.angular),html:x("html",E.parsers.html),vue:x("vue",E.parsers.vue),astro:x("astro",{},"astro"),svelte:x("svelte",{},"svelte")};function se(){function n(e){let{node:t}=e;if(t.type==="FormattedText")return t.body;throw new Error(`Unknown node type: ${t?.type}`)}return{print:n}}var V={"merging-ast":se()};0&&(module.exports={parsers,printers});
